<!DOCTYPE html>
<html lang="el">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rasa Webchat Integration</title>
</head>

<body>
<script>
    try {
        let token = localStorage.getItem("access_token");
        let payload = JSON.parse(atob(token.split(".")[1]));

        let isExpired = Date.now() >= payload.exp * 1000;
        console.log(isExpired);
        console.log(Date.now());
        console.log(payload.exp * 1000)
        console.log(!token)

        if (!token || isExpired) {
            alert("Authentication required.");
            localStorage.removeItem("access_token");
            window.location.href = "/auth";
        }
    } catch (e) {
        console.error("JWT validation failed:", e);
        alert("JWT Validation failed. Re-Authentication is required.");
        localStorage.removeItem("access_token");
        window.location.href = "/auth";
    }
</script>
<div id="rasa-chat-widget" data-avatar-url="https://static.vecteezy.com/system/resources/previews/022/739/948/large_2x/chatbot-robo-advisor-chat-bot-robot-like-assistant-concept-of-digital-advisor-avatar-to-help-the-customer-icon-vector.jpg" data-websocket-url="http://172.17.93.85:5005/socket.io"></div>
<script src="http://172.17.93.85:8888/js/rasa.js" type="application/javascript"></script>
</body>

</html>
